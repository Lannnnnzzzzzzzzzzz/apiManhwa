<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manhwaindo API Documentation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #0f172a;
            color: #e2e8f0;
            line-height: 1.6;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1e293b;
        }

        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }

        .layout {
            display: flex;
            height: 100vh;
            position: relative;
        }

        .hamburger {
            display: none;
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1001;
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .hamburger:hover {
            background: #334155;
        }

        .hamburger-icon {
            display: flex;
            flex-direction: column;
            gap: 4px;
            width: 20px;
        }

        .hamburger-icon span {
            display: block;
            height: 2px;
            background: #06b6d4;
            border-radius: 2px;
            transition: all 0.3s;
        }

        .hamburger.active .hamburger-icon span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .hamburger.active .hamburger-icon span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active .hamburger-icon span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        .sidebar {
            width: 280px;
            background: #1e293b;
            border-right: 1px solid #334155;
            overflow-y: auto;
            flex-shrink: 0;
            transition: transform 0.3s ease;
        }

        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        .sidebar-header {
            padding: 1.5rem;
            background: #0f172a;
            border-bottom: 1px solid #334155;
        }

        .sidebar-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #06b6d4;
            margin-bottom: 0.25rem;
        }

        .sidebar-subtitle {
            font-size: 0.75rem;
            color: #64748b;
        }

        .menu {
            padding: 0.5rem 0;
        }

        .menu-section {
            padding: 1rem 0;
        }

        .menu-section-title {
            padding: 0.5rem 1.5rem;
            font-size: 0.75rem;
            font-weight: 700;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .menu-item {
            padding: 0.75rem 1.5rem;
            color: #cbd5e1;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid transparent;
            font-size: 0.875rem;
        }

        .menu-item:hover {
            background: #334155;
            color: #f1f5f9;
        }

        .menu-item.active {
            background: #0369a1;
            color: #ffffff;
            border-left-color: #06b6d4;
            font-weight: 500;
        }

        .content {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
        }

        .content-header {
            margin-bottom: 2rem;
        }

        .content-title {
            font-size: 2rem;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 0.5rem;
        }

        .content-description {
            font-size: 0.95rem;
            color: #94a3b8;
        }

        .endpoint-info {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .endpoint-url {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .method-badge {
            padding: 0.25rem 0.75rem;
            background: #065f46;
            color: #6ee7b7;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 700;
            font-family: monospace;
        }

        .url-path {
            font-family: monospace;
            font-size: 0.95rem;
            color: #06b6d4;
            flex: 1;
        }

        .params-section {
            margin-top: 1.5rem;
        }

        .params-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: #cbd5e1;
            margin-bottom: 0.75rem;
        }

        .param-group {
            display: grid;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .param-row {
            display: grid;
            grid-template-columns: 120px 1fr auto;
            gap: 0.75rem;
            align-items: center;
        }

        .param-label {
            font-size: 0.875rem;
            color: #cbd5e1;
        }

        .param-input {
            padding: 0.5rem 0.75rem;
            background: #0f172a;
            border: 1px solid #334155;
            color: #e2e8f0;
            border-radius: 6px;
            font-size: 0.875rem;
        }

        .param-input:focus {
            outline: none;
            border-color: #06b6d4;
        }

        .btn {
            padding: 0.5rem 1.5rem;
            background: #0284c7;
            color: #ffffff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.2s;
        }

        .btn:hover {
            background: #0369a1;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .quick-tests {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 0.75rem;
        }

        .quick-test-btn {
            padding: 0.35rem 0.75rem;
            background: #334155;
            color: #cbd5e1;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.2s;
        }

        .quick-test-btn:hover {
            background: #475569;
            color: #f1f5f9;
        }

        .response-section {
            margin-top: 2rem;
        }

        .response-container {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 8px;
            overflow: hidden;
        }

        .response-header {
            background: #334155;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .response-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: #cbd5e1;
        }

        .copy-btn {
            padding: 0.25rem 0.75rem;
            background: #475569;
            color: #cbd5e1;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: #64748b;
        }

        .response-body {
            padding: 1rem;
            max-height: 500px;
            overflow-y: auto;
        }

        .json-viewer {
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            color: #cbd5e1;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .loading {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: #06b6d4;
            font-size: 0.875rem;
        }

        .spinner {
            border: 2px solid #334155;
            border-top: 2px solid #06b6d4;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .success-message {
            background: #064e3b;
            border: 1px solid #065f46;
            color: #6ee7b7;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .error-message {
            background: #7f1d1d;
            border: 1px solid #991b1b;
            color: #fca5a5;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .visual-preview {
            margin-top: 1.5rem;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 1rem;
        }

        .manhwa-card {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.2s;
            cursor: pointer;
        }

        .manhwa-card:hover {
            border-color: #06b6d4;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(6, 182, 212, 0.2);
        }

        .manhwa-card-image {
            width: 100%;
            aspect-ratio: 2/3;
            object-fit: cover;
            background: #334155;
        }

        .manhwa-card-content {
            padding: 0.75rem;
        }

        .manhwa-card-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: #f1f5f9;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            min-height: 2rem;
        }

        .manhwa-card-chapter {
            font-size: 0.65rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        .chapter-list {
            display: grid;
            gap: 0.5rem;
        }

        .chapter-item {
            background: #0f172a;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }

        .chapter-item:hover {
            background: #1e293b;
            border-color: #06b6d4;
        }

        .chapter-title {
            font-size: 0.875rem;
            color: #cbd5e1;
        }

        .chapter-date {
            font-size: 0.75rem;
            color: #64748b;
        }

        .image-list {
            display: flex;
            flex-direction: column;
            gap: 0;
            max-width: 100%;
        }

        .image-item {
            width: 100%;
            display: block;
        }

        .image-preview {
            width: 100%;
            height: auto;
            display: block;
        }

        .series-detail {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .series-image {
            width: 180px;
            height: 270px;
            object-fit: cover;
            border-radius: 8px;
            flex-shrink: 0;
        }

        .series-info h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .series-meta {
            color: #94a3b8;
            font-size: 0.875rem;
            margin-bottom: 0.75rem;
        }

        .series-synopsis {
            color: #cbd5e1;
            font-size: 0.875rem;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }

            .sidebar {
                position: fixed;
                top: 0;
                left: 0;
                height: 100vh;
                width: 280px;
                transform: translateX(-100%);
                z-index: 1000;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .sidebar-overlay.active {
                display: block;
            }

            .main-content {
                width: 100%;
            }

            .param-row {
                grid-template-columns: 1fr;
            }

            .card-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }

            .series-detail {
                flex-direction: column;
            }

            .series-image {
                width: 100%;
                max-width: 200px;
            }
        }
    </style>
</head>
<body>
    <button class="hamburger" onclick="toggleSidebar()">
        <div class="hamburger-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </button>
    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>
    <div class="layout">
        <!-- Sidebar Navigation -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">Manhwaindo API</div>
                <div class="sidebar-subtitle">Interactive Documentation</div>
            </div>

            <div class="menu">
                <div class="menu-section">
                    <div class="menu-section-title">Getting Started</div>
                    <div class="menu-item active" onclick="showContent('home')">Home</div>
                    <div class="menu-item" onclick="showContent('popular')">Popular Manhwa</div>
                    <div class="menu-item" onclick="showContent('lastupdate')">Latest Update</div>
                    <div class="menu-item" onclick="showContent('project')">Project Update</div>
                    <div class="menu-item" onclick="showContent('series-list')">All Series</div>
                </div>

                <div class="menu-section">
                    <div class="menu-section-title">Search & Details</div>
                    <div class="menu-item" onclick="showContent('search')">Search Manhwa</div>
                    <div class="menu-item" onclick="showContent('series')">Series Detail</div>
                    <div class="menu-item" onclick="showContent('chapter')">Chapter Detail</div>
                </div>

                <div class="menu-section">
                    <div class="menu-section-title">Downloads</div>
                    <div class="menu-item" onclick="showContent('download')">Download Chapter</div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="content" id="mainContent">
            <!-- Home Page -->
            <div id="content-home" class="content-page">
                <div class="content-header">
                    <h1 class="content-title">Manhwaindo API Documentation</h1>
                    <p class="content-description">Welcome to the interactive API documentation. Select an endpoint from the sidebar to test it directly in your browser.</p>
                </div>

                <div class="endpoint-info">
                    <h3 style="margin-bottom: 1rem; color: #06b6d4;">Available Endpoints</h3>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #334155;">
                            <span class="method-badge">GET</span>
                            <span style="margin-left: 1rem; font-family: monospace; color: #cbd5e1;">/api/popular</span>
                        </li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #334155;">
                            <span class="method-badge">GET</span>
                            <span style="margin-left: 1rem; font-family: monospace; color: #cbd5e1;">/api/lastupdate</span>
                        </li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #334155;">
                            <span class="method-badge">GET</span>
                            <span style="margin-left: 1rem; font-family: monospace; color: #cbd5e1;">/api/project</span>
                        </li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #334155;">
                            <span class="method-badge">GET</span>
                            <span style="margin-left: 1rem; font-family: monospace; color: #cbd5e1;">/api/series-list</span>
                        </li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #334155;">
                            <span class="method-badge">GET</span>
                            <span style="margin-left: 1rem; font-family: monospace; color: #cbd5e1;">/api/search?q={query}</span>
                        </li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #334155;">
                            <span class="method-badge">GET</span>
                            <span style="margin-left: 1rem; font-family: monospace; color: #cbd5e1;">/api/series/{slug}</span>
                        </li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #334155;">
                            <span class="method-badge">GET</span>
                            <span style="margin-left: 1rem; font-family: monospace; color: #cbd5e1;">/api/chapter/{slug}</span>
                        </li>
                        <li style="padding: 0.5rem 0;">
                            <span class="method-badge">GET</span>
                            <span style="margin-left: 1rem; font-family: monospace; color: #cbd5e1;">/api/download/{slug}</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Popular Manhwa Page -->
            <div id="content-popular" class="content-page" style="display: none;">
                <div class="content-header">
                    <h1 class="content-title">Popular Manhwa</h1>
                    <p class="content-description">Get a list of popular manhwa/manga currently trending.</p>
                </div>

                <div class="endpoint-info">
                    <div class="endpoint-url">
                        <span class="method-badge">GET</span>
                        <span class="url-path">/api/popular</span>
                    </div>
                    <p style="color: #94a3b8; font-size: 0.875rem;">No parameters required.</p>
                    <button class="btn" onclick="testEndpoint('popular')" style="margin-top: 1rem;">Test Endpoint</button>
                </div>

                <div id="response-popular"></div>
            </div>

            <!-- Latest Update Page -->
            <div id="content-lastupdate" class="content-page" style="display: none;">
                <div class="content-header">
                    <h1 class="content-title">Latest Update</h1>
                    <p class="content-description">Get the latest updated manhwa/manga with pagination support.</p>
                </div>

                <div class="endpoint-info">
                    <div class="endpoint-url">
                        <span class="method-badge">GET</span>
                        <span class="url-path">/api/lastupdate</span>
                    </div>

                    <div class="params-section">
                        <div class="params-title">Parameters (Optional)</div>
                        <div class="param-group">
                            <div class="param-row">
                                <label class="param-label">Page</label>
                                <input type="number" class="param-input" id="lastupdate-page" placeholder="1" value="1" min="1">
                                <button class="btn" onclick="testEndpoint('lastupdate')">Test</button>
                            </div>
                        </div>
                        <div class="quick-tests">
                            <button class="quick-test-btn" onclick="quickTest('lastupdate', 1)">Page 1</button>
                            <button class="quick-test-btn" onclick="quickTest('lastupdate', 2)">Page 2</button>
                            <button class="quick-test-btn" onclick="quickTest('lastupdate', 3)">Page 3</button>
                        </div>
                    </div>
                </div>

                <div id="response-lastupdate"></div>
            </div>

            <!-- Project Update Page -->
            <div id="content-project" class="content-page" style="display: none;">
                <div class="content-header">
                    <h1 class="content-title">Project Update</h1>
                    <p class="content-description">Get the list of project manhwa/manga currently being worked on.</p>
                </div>

                <div class="endpoint-info">
                    <div class="endpoint-url">
                        <span class="method-badge">GET</span>
                        <span class="url-path">/api/project</span>
                    </div>

                    <div class="params-section">
                        <div class="params-title">Parameters (Optional)</div>
                        <div class="param-group">
                            <div class="param-row">
                                <label class="param-label">Page</label>
                                <input type="number" class="param-input" id="project-page" placeholder="1" value="1" min="1">
                                <button class="btn" onclick="testEndpoint('project')">Test</button>
                            </div>
                        </div>
                        <div class="quick-tests">
                            <button class="quick-test-btn" onclick="quickTest('project', 1)">Page 1</button>
                            <button class="quick-test-btn" onclick="quickTest('project', 2)">Page 2</button>
                        </div>
                    </div>
                </div>

                <div id="response-project"></div>
            </div>

            <!-- Series List Page -->
            <div id="content-series-list" class="content-page" style="display: none;">
                <div class="content-header">
                    <h1 class="content-title">All Series</h1>
                    <p class="content-description">Get a complete list of all available manhwa/manga series.</p>
                </div>

                <div class="endpoint-info">
                    <div class="endpoint-url">
                        <span class="method-badge">GET</span>
                        <span class="url-path">/api/series-list</span>
                    </div>

                    <div class="params-section">
                        <div class="params-title">Parameters (Optional)</div>
                        <div class="param-group">
                            <div class="param-row">
                                <label class="param-label">Page</label>
                                <input type="number" class="param-input" id="series-list-page" placeholder="1" value="1" min="1">
                                <button class="btn" onclick="testEndpoint('series-list')">Test</button>
                            </div>
                        </div>
                        <div class="quick-tests">
                            <button class="quick-test-btn" onclick="quickTest('series-list', 1)">Page 1</button>
                            <button class="quick-test-btn" onclick="quickTest('series-list', 2)">Page 2</button>
                            <button class="quick-test-btn" onclick="quickTest('series-list', 3)">Page 3</button>
                        </div>
                    </div>
                </div>

                <div id="response-series-list"></div>
            </div>

            <!-- Search Page -->
            <div id="content-search" class="content-page" style="display: none;">
                <div class="content-header">
                    <h1 class="content-title">Search Manhwa</h1>
                    <p class="content-description">Search for manhwa/manga by title or keywords.</p>
                </div>

                <div class="endpoint-info">
                    <div class="endpoint-url">
                        <span class="method-badge">GET</span>
                        <span class="url-path">/api/search</span>
                    </div>

                    <div class="params-section">
                        <div class="params-title">Parameters (Required)</div>
                        <div class="param-group">
                            <div class="param-row">
                                <label class="param-label">Query (q)</label>
                                <input type="text" class="param-input" id="search-q" placeholder="solo leveling">
                                <button class="btn" onclick="testEndpoint('search')">Test</button>
                            </div>
                        </div>
                        <div class="quick-tests">
                            <button class="quick-test-btn" onclick="quickTestSearch('solo leveling')">Solo Leveling</button>
                            <button class="quick-test-btn" onclick="quickTestSearch('tower of god')">Tower of God</button>
                            <button class="quick-test-btn" onclick="quickTestSearch('one piece')">One Piece</button>
                        </div>
                    </div>
                </div>

                <div id="response-search"></div>
            </div>

            <!-- Series Detail Page -->
            <div id="content-series" class="content-page" style="display: none;">
                <div class="content-header">
                    <h1 class="content-title">Series Detail</h1>
                    <p class="content-description">Get detailed information about a specific series including all chapters.</p>
                </div>

                <div class="endpoint-info">
                    <div class="endpoint-url">
                        <span class="method-badge">GET</span>
                        <span class="url-path">/api/series/{slug}</span>
                    </div>

                    <div class="params-section">
                        <div class="params-title">Parameters (Required)</div>
                        <div class="param-group">
                            <div class="param-row">
                                <label class="param-label">Slug</label>
                                <input type="text" class="param-input" id="series-slug" placeholder="solo-leveling">
                                <button class="btn" onclick="testEndpoint('series')">Test</button>
                            </div>
                        </div>
                        <div class="quick-tests">
                            <button class="quick-test-btn" onclick="quickTestSeries('solo-leveling')">Solo Leveling</button>
                            <button class="quick-test-btn" onclick="quickTestSeries('tower-of-god')">Tower of God</button>
                        </div>
                    </div>
                </div>

                <div id="response-series"></div>
            </div>

            <!-- Chapter Detail Page -->
            <div id="content-chapter" class="content-page" style="display: none;">
                <div class="content-header">
                    <h1 class="content-title">Chapter Detail</h1>
                    <p class="content-description">Get chapter details including all image URLs.</p>
                </div>

                <div class="endpoint-info">
                    <div class="endpoint-url">
                        <span class="method-badge">GET</span>
                        <span class="url-path">/api/chapter/{slug}</span>
                    </div>

                    <div class="params-section">
                        <div class="params-title">Parameters (Required)</div>
                        <div class="param-group">
                            <div class="param-row">
                                <label class="param-label">Slug</label>
                                <input type="text" class="param-input" id="chapter-slug" placeholder="solo-leveling-chapter-1">
                                <button class="btn" onclick="testEndpoint('chapter')">Test</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="response-chapter"></div>
            </div>

            <!-- Download Page -->
            <div id="content-download" class="content-page" style="display: none;">
                <div class="content-header">
                    <h1 class="content-title">Download Chapter</h1>
                    <p class="content-description">Download a chapter as ZIP or PDF format.</p>
                </div>

                <div class="endpoint-info">
                    <div class="endpoint-url">
                        <span class="method-badge">GET</span>
                        <span class="url-path">/api/download/{slug}</span>
                    </div>

                    <div class="params-section">
                        <div class="params-title">Parameters</div>
                        <div class="param-group">
                            <div class="param-row">
                                <label class="param-label">Slug</label>
                                <input type="text" class="param-input" id="download-slug" placeholder="solo-leveling-chapter-1">
                            </div>
                            <div class="param-row">
                                <label class="param-label">Format</label>
                                <select class="param-input" id="download-format">
                                    <option value="zip">ZIP</option>
                                    <option value="pdf">PDF</option>
                                </select>
                                <button class="btn" onclick="testEndpoint('download')">Get URL</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="response-download"></div>
            </div>
        </div>
    </div>

    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const hamburger = document.querySelector('.hamburger');
            const overlay = document.querySelector('.sidebar-overlay');

            sidebar.classList.toggle('active');
            hamburger.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        function showContent(page) {
            document.querySelectorAll('.content-page').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));

            const contentEl = document.getElementById(`content-${page}`);
            if (contentEl) {
                contentEl.style.display = 'block';
            }

            event.target.classList.add('active');

            // Close sidebar on mobile after selecting
            if (window.innerWidth <= 768) {
                const sidebar = document.getElementById('sidebar');
                if (sidebar.classList.contains('active')) {
                    toggleSidebar();
                }
            }
        }

        async function testEndpoint(type) {
            const responseDiv = document.getElementById(`response-${type}`);
            let url = '';

            switch(type) {
                case 'popular':
                    url = '/api/popular';
                    break;
                case 'lastupdate':
                    const page1 = document.getElementById('lastupdate-page').value;
                    url = `/api/lastupdate${page1 ? `?page=${page1}` : ''}`;
                    break;
                case 'project':
                    const page2 = document.getElementById('project-page').value;
                    url = `/api/project${page2 ? `?page=${page2}` : ''}`;
                    break;
                case 'series-list':
                    const page3 = document.getElementById('series-list-page').value;
                    url = `/api/series-list${page3 ? `?page=${page3}` : ''}`;
                    break;
                case 'search':
                    const query = document.getElementById('search-q').value;
                    if (!query) {
                        showError(responseDiv, 'Query parameter is required');
                        return;
                    }
                    url = `/api/search?q=${encodeURIComponent(query)}`;
                    break;
                case 'series':
                    const slug = document.getElementById('series-slug').value;
                    if (!slug) {
                        showError(responseDiv, 'Slug parameter is required');
                        return;
                    }
                    url = `/api/series/${slug}`;
                    break;
                case 'chapter':
                    const chSlug = document.getElementById('chapter-slug').value;
                    if (!chSlug) {
                        showError(responseDiv, 'Slug parameter is required');
                        return;
                    }
                    url = `/api/chapter/${chSlug}`;
                    break;
                case 'download':
                    const dlSlug = document.getElementById('download-slug').value;
                    const format = document.getElementById('download-format').value;
                    if (!dlSlug) {
                        showError(responseDiv, 'Slug parameter is required');
                        return;
                    }
                    url = `/api/download/${dlSlug}?format=${format}`;
                    showDownloadUrl(responseDiv, url);
                    return;
            }

            showLoading(responseDiv);

            try {
                const response = await fetch(url);
                const data = await response.json();

                if (data.success) {
                    showSuccess(responseDiv, data, type);
                } else {
                    showError(responseDiv, data.message || 'Request failed');
                }
            } catch (error) {
                showError(responseDiv, error.message);
            }
        }

        function quickTest(type, page) {
            document.getElementById(`${type}-page`).value = page;
            testEndpoint(type);
        }

        function quickTestSearch(query) {
            document.getElementById('search-q').value = query;
            testEndpoint('search');
        }

        function quickTestSeries(slug) {
            document.getElementById('series-slug').value = slug;
            testEndpoint('series');
        }

        function showLoading(container) {
            container.innerHTML = `
                <div class="response-section">
                    <div class="loading">
                        <div class="spinner"></div>
                        <span>Loading...</span>
                    </div>
                </div>
            `;
        }

        function showError(container, message) {
            container.innerHTML = `
                <div class="response-section">
                    <div class="error-message">
                        <strong>Error:</strong> ${message}
                    </div>
                </div>
            `;
        }

        function showSuccess(container, data, type) {
            let html = '<div class="response-section">';
            html += '<div class="success-message">✓ Request successful</div>';

            if (['popular', 'lastupdate', 'project', 'series-list', 'search'].includes(type)) {
                const items = data.data || [];
                if (items.length > 0) {
                    html += '<div class="visual-preview"><div class="card-grid">';
                    items.slice(0, 12).forEach(item => {
                        const slug = item.slug || '';
                        html += `
                            <div class="manhwa-card" onclick="navigateToSeries('${slug}')">
                                <img src="${item.image || ''}"
                                     alt="${item.title}"
                                     class="manhwa-card-image"
                                     onerror="this.src='https://via.placeholder.com/140x210?text=No+Image'">
                                <div class="manhwa-card-content">
                                    <div class="manhwa-card-title">${item.title || 'No Title'}</div>
                                    ${item.latestChapter ? `<div class="manhwa-card-chapter">${item.latestChapter}</div>` : ''}
                                </div>
                            </div>
                        `;
                    });
                    html += '</div></div>';
                }
            } else if (type === 'series') {
                const series = data.data;
                html += `
                    <div class="visual-preview">
                        <div class="series-detail">
                            <img src="${series.image}" class="series-image" onerror="this.src='https://via.placeholder.com/180x270?text=No+Image'">
                            <div class="series-info">
                                <h3>${series.title}</h3>
                                <div class="series-meta">${series.type || ''} • ${series.status || ''} ${series.rating ? `• ★ ${series.rating}` : ''}</div>
                                <div class="series-synopsis">${series.synopsis || ''}</div>
                            </div>
                        </div>
                        ${series.chapters && series.chapters.length > 0 ? `
                            <h4 style="margin-bottom: 0.75rem;">Chapters (${series.totalChapters || series.chapters.length})</h4>
                            <div class="chapter-list">
                                ${series.chapters.map(ch => {
                                    const chSlug = ch.slug ? ch.slug.replace(/\/$/, '') : '';
                                    return `
                                        <div class="chapter-item" onclick="navigateToChapter('${chSlug}')">
                                            <span class="chapter-title">${ch.title}</span>
                                            ${ch.releaseDate ? `<span class="chapter-date">${ch.releaseDate}</span>` : ''}
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        ` : ''}
                    </div>
                `;
            } else if (type === 'chapter') {
                const chapter = data.data;
                if (chapter.images && chapter.images.length > 0) {
                    html += '<div class="visual-preview"><div class="image-list">';
                    chapter.images.forEach((img, idx) => {
                        html += `
                            <div class="image-item">
                                <img src="${img}"
                                     alt="Page ${idx + 1}"
                                     class="image-preview"
                                     loading="lazy"
                                     onerror="this.onerror=null; this.src='https://via.placeholder.com/800x1200/1e293b/06b6d4?text=Page+${idx + 1}+Failed+to+Load';">
                            </div>
                        `;
                    });
                    html += '</div></div>';
                }
            }

            html += `
                <div class="response-container" style="margin-top: 1.5rem;">
                    <div class="response-header">
                        <span class="response-title">JSON Response</span>
                        <button class="copy-btn" onclick="copyJSON(${JSON.stringify(JSON.stringify(data))})">Copy JSON</button>
                    </div>
                    <div class="response-body">
                        <pre class="json-viewer">${JSON.stringify(data, null, 2)}</pre>
                    </div>
                </div>
            `;
            html += '</div>';

            container.innerHTML = html;
        }

        function navigateToSeries(slug) {
            if (!slug) return;

            showContent('series');
            document.getElementById('series-slug').value = slug;
            testEndpoint('series');
        }

        function navigateToChapter(slug) {
            if (!slug) return;

            showContent('chapter');
            document.getElementById('chapter-slug').value = slug;
            testEndpoint('chapter');
        }

        function showDownloadUrl(container, url) {
            const fullUrl = window.location.origin + url;
            container.innerHTML = `
                <div class="response-section">
                    <div class="success-message">✓ Download URL generated</div>
                    <div class="endpoint-info">
                        <p style="margin-bottom: 0.5rem; color: #94a3b8;">Download URL:</p>
                        <div style="display: flex; gap: 0.5rem; align-items: center;">
                            <input type="text" value="${fullUrl}" readonly style="flex: 1; padding: 0.5rem; background: #0f172a; border: 1px solid #334155; border-radius: 6px; color: #cbd5e1; font-family: monospace; font-size: 0.875rem;">
                            <button class="copy-btn" onclick="copyText('${fullUrl}')">Copy</button>
                        </div>
                        <p style="margin-top: 0.75rem; font-size: 0.875rem; color: #64748b;">
                            Click the URL or open it in a new tab to start the download.
                        </p>
                    </div>
                </div>
            `;
        }

        function copyJSON(jsonString) {
            navigator.clipboard.writeText(jsonString).then(() => {
                alert('JSON copied to clipboard!');
            });
        }

        function copyText(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('Copied to clipboard!');
            });
        }
    </script>
</body>
</html>
